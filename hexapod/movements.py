"""
Hexapode - Séquences de mouvement
Toutes les séquences de positions pour les différents mouvements
"""

# ============================================================================
# POSITION INITIALE (REPOS)
# ============================================================================

INIT_POSE = [30, -30, -30, -30, 15, -30, -15, -30, -30, -30, 30, -30]

# ============================================================================
# SÉQUENCE AVANCER (Move Forward)
# ============================================================================

SEQ_MOVE_F = [
    [51.54, -40, -40, -10, 10, -10, -10, -10, -50, -10, 61.54, -20],
    [43.85, -20, -43.85, -10, 13.85, -10, -13.85, -10, -46.15, -10, 69.23, -30],
    [47.69, -10, -47.69, -10, 17.69, -10, -17.69, -10, -53.85, -20, 76.92, -40],
    [51.54, -10, -51.54, -10, 21.54, -10, -21.54, -10, -61.54, -30, 84.62, -20],
    [55.38, -10, -55.38, -10, 25.38, -10, -13.85, -20, -69.23, -40, 80.77, -10],
    [59.23, -10, -59.23, -10, 29.23, -10, -6.15, -30, -76.92, -20, 76.92, -10],
    [63.08, -10, -63.08, -10, 21.54, -20, 1.54, -40, -73.08, -10, 73.08, -10],
    [66.92, -10, -66.92, -10, 13.85, -30, 9.23, -20, -69.23, -10, 69.23, -10],
    [70.77, -10, -59.23, -20, 6.15, -40, 5.38, -10, -65.38, -10, 65.38, -10],
    [74.62, -10, -51.54, -30, -1.54, -20, 1.54, -10, -61.54, -10, 61.54, -10],
    [66.92, -20, -43.85, -40, 2.31, -10, -2.31, -10, -57.69, -10, 57.69, -10],
    [59.23, -30, -36.15, -20, 6.15, -10, -6.15, -10, -53.85, -10, 53.85, -10]
]

# ============================================================================
# SÉQUENCE RECULER (Move Backward)
# ============================================================================

SEQ_MOVE_B = [
    [59.23, -30, -36.15, -20, 6.15, -10, -6.15, -10, -53.85, -10, 53.85, -10],
    [66.92, -20, -43.85, -40, 2.31, -10, -2.31, -10, -57.69, -10, 58, -10],
    [75, -10, -52, -30, -2, -20, 2, -10, -62, -10, 62, -10],
    [71, -10, -59, -20, 6.2, -40, 5, -10, -65, -10, 65, -10],
    [67, -10, -67, -10, 14, -30, 9, -20, -69, -10, 69, -10],
    [63, -10, -63, -10, 22, -20, 2, -40, -73, -10, 73, -10],
    [59, -10, -59, -10, 29, -10, -6.2, -30, -77, -20, 77, -10],
    [55, -10, -55, -10, 25, -10, -14, -20, -69, -40, 81, -10],
    [52, -10, -52, -10, 22, -10, -22, -10, -62, -30, 85, -20],
    [48, -10, -48, -10, 18, -10, -18, -10, -54, -20, 77, -40],
    [44, -20, -44, -10, 14, -10, -14, -10, -46, -10, 69, -30],
    [52, -40, -40, -10, 10, -10, -10, -10, -50, -10, 62, -20]
]

# ============================================================================
# SÉQUENCE TRANSLATION DROITE (Slide Right)
# ============================================================================

SEQ_SLIDE_R = [
    [0, -35, -60, -25, 8, -60, -8, -50, 0, -35, 40, -25],
    [-10, -20, -50, -50, 8, -20, -8, -30, 10, -20, -10, -50],
    [-10, -40, -50, -20, 8, -20, -8, -30, 10, -40, -10, -20],
    [40, -40, -50, -20, 8, -20, -8, -30, -40, -40, -10, -20],
    [60, -20, -60, -30, 8, -50, -8, -50, -60, -20, -10, -30]
]

# ============================================================================
# SÉQUENCE TRANSLATION GAUCHE (Slide Left)
# ============================================================================

SEQ_SLIDE_L = [
    [60, -25, 0, -35, 8, -50, -8, -60, -40, -25, 0, -35],
    [50, -50, 10, -20, 8, -30, -8, -20, 10, -50, -10, -20],
    [50, -20, 10, -40, 8, -30, -8, -20, 10, -20, -10, -40],
    [50, -20, -40, -40, 8, -30, -8, -20, 10, -20, 40, -40],
    [60, -30, -60, -20, 8, -50, -8, -50, 10, -30, 60, -20]
]

# ============================================================================
# SÉQUENCE ROTATION GAUCHE (Pivot Left)
# ============================================================================

SEQ_PIVOT_L = [
    [55, -20, -55, -40, -7, -40, 7, -20, -35, -20, 35, -40],
    [70, -10, -70, -10, -22, -10, 22, -10, -20, -10, 20, -10],
    [55.29, -40, -55.29, -20, -7.29, -20, 7.29, -40, -34.71, -40, 34.71, -20],
    [40, -10, -40, -10, 8, -10, -8, -10, -50, -10, 50, -10]
]

# ============================================================================
# SÉQUENCE ROTATION DROITE (Pivot Right)
# ============================================================================

SEQ_PIVOT_R = [
    [25, -20, -25, -40, 23, -40, -23, -20, -65, -20, 65, -40],
    [10, -10, -10, -10, 38, -10, -38, -10, -80, -10, 80, -10],
    [25.29, -40, -25.29, -20, 22.71, -20, -22.71, -40, -64.71, -40, 64.71, -20],
    [40, -10, -40, -10, 8, -10, -8, -10, -50, -10, 50, -10]
]


# ============================================================================
# FONCTIONS UTILITAIRES
# ============================================================================

def deg2dxl(deg):
    """Convertit un angle en degrés vers une valeur Dynamixel (0-4095)"""
    return int(2048 + (deg * (4095.0 / 360.0)))


def amplify_sequence(sequence, factor):
    """
    Amplifie une séquence de mouvement par un facteur donné.
    Augmente l'amplitude des mouvements autour de la position moyenne.
    """
    new_sequence = []
    num_motors = len(sequence[0])
    means = [sum(step[i] for step in sequence) / len(sequence) for i in range(num_motors)]
    
    for step in sequence:
        new_step = []
        for i in range(num_motors):
            delta = step[i] - means[i]
            new_val = means[i] + (delta * factor)
            new_step.append(new_val)
        new_sequence.append(new_step)
    return new_sequence
